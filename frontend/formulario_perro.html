<!DOCTYPE html>
<html>
  <head>
    <style>
        .form {
            margin: 1% 20% 5% 20%;
        }
        .terms {
            font-size: 40px;
        }
    </style>
    <link
        rel="stylesheet"
        href="https://cdn.jsdelivr.net/npm/bulma@1.0.2/css/bulma.min.css"
    >
    <link rel="stylesheet" type="text/css">
  </head>
  
  <body>
    
    <div class="form">
    <h1 class="terms" style="margin: 0 0 5% 0">Registra a un animal</h1>
    <div class="field">
      <label class="label">Nombre</label>
      <div class="control">
        <input class="input" type="text" placeholder="Firulais">
      </div>
    </div>

    <div class="field">
      <label class="label">Edad</label>
      <div class="control">
        <input class="input" type="number" min="0" max="25" placeholder="0">
      </div>
    </div>



    
    <div class="field">
      <label class="label">Raza</label>
      <div class="control">
        <div class="select">
          <select>
          </select>
        </div>
      </div>
    </div>

    <script>
        const breeds = ["Labrador", "Poodle", "Bulldog", "Beagle", "Chihuahua"];
        const select = document.querySelector('.field .select select');
        breeds.forEach(breed => {
          const option = document.createElement('option');
          option.value = breed;
          option.textContent = breed;
          select.appendChild(option);
        });
      </script>

    <div class="field">
        <label class="label">Sexo</label>
        <div class="control">
          <div class="select">
            <select>
              <option>Masculino</option>
              <option>Femenino</option>
            </select>
          </div>
        </div>
      </div>
    

    
    
    <div class="field">
      <div class="control">
        <label class="checkbox">
          <input type="checkbox">
          Estoy de acuerdo con los <a href="#"><button class="js-modal-trigger" data-target="modal-js-example">
      términos y condiciones
    </button></a>
        </label>
      </div>
    </div>
    
    
    <script src="script_formulario.js" defer></script>
    <div id="modal-js-example" class="modal">
      <div class="modal-background"></div>
      <div class="modal-content">
        <div class="box">
          <div class="terms">
          <p><strong>TÉRMINO Y CONDICIÓN:</strong> NO MALTRATAR A LOS ANIMALES</p>
          </div> 
          <img src="https://i.imgur.com/jptS5Xq.jpeg" width="90%">
          <!-- Your content -->
        </div>
      </div>
    
      <button class="modal-close is-large" aria-label="close"></button>
    </div>
    

    
    <div class="field is-grouped">
      <div class="control">
        <button class="button is-link" onclick="submitForm()">Submit</button>
      </div>
      <div class="control">
        <button class="button is-link is-light" onclick="resetForm()">Cancel</button>
      </div>
    </div>

    <script>
      function submitForm() {
        const nombre = document.querySelector('input[type="text"]').value;
        const edad = document.querySelector('input[type="number"]').value;
        const raza = document.querySelector('.field .select select').value;
        const sexo = document.querySelectorAll('.field .select select')[1].value;
        const terms = document.querySelector('input[type="checkbox"]').checked;
        //alert to debug data
        alert(`Nombre: ${nombre}, Edad: ${edad}, Sexo: ${sexo}, Raza: ${raza}, Terms: ${terms}`);
        if (!terms) {
          alert('You must agree to the terms and conditions.');
          return;
        }

        let data = { nombre:nombre, edad:parseInt(edad), raza:raza, sexo:sexo, tipo:"Perro"};

        fetch('http://127.0.0.1:3000/api/v1/animales', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
          },
          body: JSON.stringify(data),
        })
        .then(response => response.json())
        .then(data => {
          console.log('Success:', data);
          alert('Animal registered successfully!');
        })
        .catch((error) => {
          console.error('Error:', error);
          alert('There was an error registering the animal.');
        });
      }

      function resetForm() {
        document.querySelector('input[type="text"]').value = '';
        document.querySelector('input[type="number"]').value = '';
        document.querySelector('.field .select select').value = 'Masculino';
        document.querySelectorAll('.field .select select')[1].value = '';
        document.querySelector('input[type="checkbox"]').checked = false;
      }
    </script>



  </div>
  <div class="modal">
    <div class="modal-background"></div>
    <div class="modal-content">
      <p class="image is-4by3">
        <img src="https://bulma.io/assets/images/placeholders/1280x960.png" alt="">
      </p>
    </div>
    <button class="modal-close is-large" aria-label="close"></button>
  </div>

 
  
  </body>

</html>